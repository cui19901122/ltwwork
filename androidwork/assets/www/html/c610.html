<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="https://gw.alipayobjects.com/os/rmsportal/YmDAMEQVbLJpVbKiRQVX.css" />
<style type="text/css">
*{
margin: 0;
}
.base{
width: 100%;
	height: 100vh;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
}
.conter{
width: 100%;
	height: 60%;
	border: 2px solid black;
}

</style>
</head>
<body>
<div class="base">
各语言班级人数比例
<div class="conter">
<canvas id="mountNode"></canvas>
</div>
</div>
</body>
<script src="https://gw.alipayobjects.com/os/antv/assets/f2/3.3.0/f2.min.js"></script>
<script type="text/javascript">

alert("请求antv业务饼图报表");

   var  formData=new FormData();
   formData.append("antv","quaryUsercount");

   var options={method:'post',body:formData};
  
   fetch("http://yhjzky.natappfree.cc/antv",options).then(function(response){
	  
	  if(response.status==200)
	  {
		  
		  
		  response.json().then(function(datas){
			  
			  alert(datas.jsonDatas);
			  
			  createView(datas.jsonDatas);
			  
		  });
	  }
	  
  }).catch(function(error){
	  
	  
  });
   
   
   function createView(datas)
   {
 	  var  a="1";
 	  
 	  var chart = new F2.Chart({
 		  id: 'mountNode',
 		  pixelRatio: window.devicePixelRatio
 		});
 	  
 	  
 		chart.source(datas, {
 		  percent: {
 		    formatter: function formatter(val) {
 		      return val * 100 + '%';
 		    }
 		  }
 		});
 		
 		
 		/**chart.legend({
 			  position: 'right',
 			  itemFormatter: function itemFormatter(val) {
 			    return val + '  ' + map[val];
 			  }
 			});**/
 		
 		
 		chart.tooltip(false);
 			
 		chart.coord('polar', {
 		  transposed: true,
 		  radius: 0.85
 		});
 		
 		chart.axis(false);
 		
 		chart.interval().position('a*usercount').color('classname', ['#1890FF', '#13C2C2', '#2FC25B', '#FACC14', '#F04864', '#8543E0']).adjust('stack').style({
 		  lineWidth: 1,
 		  stroke: '#fff',
 		  lineJoin: 'round',
 		  lineCap: 'round'
 		}).animate({
 		  appear: {
 		    duration: 1200,
 		    easing: 'bounceOut'
 		  }
 		});

 		chart.render();
 	  
   }
   

</script>
</html>